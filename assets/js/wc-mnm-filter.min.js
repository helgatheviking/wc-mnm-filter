!function(r){function s(t){var e=this;this.$form=t.$mnm_form,this.$productWrap=this.$form.find(".mnm_child_products"),this.$products=this.$productWrap.find(".mnm_item"),this.$filter=this.$form.find(".mnm_filter_button_group"),this.$showAll=this.$filter.find('button[data-filter="*"]'),this.$buttons=this.$filter.find('button[data-filter!="*"]'),this.taxonomy=this.$filter.data("taxonomy"),this.$error=r('<div style="display:none" class="mnm_filter_error"></div>'),this.classTerm="."+this.taxonomy+"-",this.initialize=function(){this.hide_empty_buttons(),this.bind_event_handlers(),this.maybe_display(),this.$error.html(WC_MNM_FILTER_PARAMS.i18n_no_matches).hide().insertAfter(this.$filter)},this.hide_empty_buttons=function(){var s=0;r(".mnm_filter_button_group button").each(function(t){var i=r(this).data("filter");if("*"===i)return!0;e.$products.filter(e.classTerm+i).length?s++:r(this).hide()}),e.$filter.data("visible",s)},this.bind_event_handlers=function(){this.$filter.on("click","button",this.filter)},this.filter=function(t){t.preventDefault(),WC_MNM_FILTER_PARAMS.multi_terms||e.$buttons.removeClass("selected"),r(this).toggleClass("selected");var i,s,t=e.$buttons.filter(".selected");"*"===r(this).data("filter")||0===t.length?(e.$buttons.removeClass("selected"),e.$showAll.addClass("selected"),e.$productWrap.show(),e.$products.show(),e.$error.hide()):(i=[],e.$showAll.removeClass("selected"),t.each(function(t){i.push(e.classTerm+r(this).data("filter"))}),(t=e.$products.filter(i.join(""))).length?(e.$productWrap.show(),e.$error.hide()):(e.$productWrap.hide(),e.$error.show()),e.$products.hide(),t.show()),e.$form.hasClass("layout_grid")&&(s=WC_MNM_FILTER_PARAMS.columns,e.$products.removeClass("first").removeClass("last"),e.$products.filter(":visible").each(function(t){0!=t&&(t+1)%s!=0||r(this).addClass("first"),(t+1)%s==0&&r(this).addClass("last")}))},this.maybe_display=function(){e.$filter.data("visible")&&e.$filter.show()},this.initialize()}r("body").on("wc-mnm-initializing",function(t,i){new s(i)})}(jQuery);